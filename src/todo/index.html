<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Toâ€‘Do Manager</title>
  <style>
    #todo-list { border: solid 1px #000; padding: 10px; margin-top: 10px; }
    .task { display: flex; justify-content: space-between; margin: 5px 0; }
    .task button { margin-left: 10px; }
  </style>
</head>
<body>
  <h1>Task Manager</h1>
  <p>Title:</p>
  <input type="text" id="title-input">
  <p>Content:</p>
  <input type="text" id="content-input">
  <br><br>
  <button id="add-btn" onclick="processTaskInput()">Add Task</button>
  <button onclick="clearTasks()">Clear All Tasks</button>
  <div id="todo-list"></div>

  <script>
    function processTaskInput() {
      const title = document.getElementById('title-input').value.trim();
      const content = document.getElementById('content-input').value.trim();
      if (!title || !content) return;
      fetch(`http://localhost:3000/add/${encodeURIComponent(title)}/${encodeURIComponent(content)}`)
        .then(res => res.json())
        .then(data => {
          updateTodoList(data.tasks);
          document.getElementById('title-input').value = '';
          document.getElementById('content-input').value = '';
        });
    }

    function clearTasks() {
      fetch('http://localhost:3000/clear')
        .then(res => res.json())
        .then(data => updateTodoList(data.tasks));
    }

    function deleteTask(title) {
      fetch(`http://localhost:3000/delete/${encodeURIComponent(title)}`)
        .then(res => res.json())
        .then(data => updateTodoList(data.tasks));
    }

    function updateTodoList(tasks) {
      const todoList = document.getElementById('todo-list');
      todoList.innerHTML = '';
      tasks.forEach(t => {
        const div = document.createElement('div');
        div.className = 'task';
        div.innerHTML = `<strong>${t.title}:</strong> ${t.content}`;
        const btn = document.createElement('button');
        btn.innerText = 'Delete';
        btn.onclick = () => deleteTask(t.title);
        div.appendChild(btn);
        todoList.appendChild(div);
      });
    }
  </script>
</body>
</html>
