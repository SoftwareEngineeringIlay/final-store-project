<div class="todo-container">
  <h2>ğŸ“‹ Add a new task</h2>

  <div class="form-group">
    <input
      [(ngModel)]="newTitle"
      placeholder="Task title"
      class="form-control"
    >
    <textarea
      [(ngModel)]="newContent"
      placeholder="Task content"
      class="form-control"
    ></textarea>
    <button (click)="addTask()" class="btn btn-success">Add Task</button>
    <button (click)="clearTasks()" class="btn btn-danger ml-2">
      Delete All Tasks
    </button>
  </div>

  <ul class="task-list">
    <li *ngFor="let task of tasks" class="task-item">
      <!-- VIEW MODE -->
      <ng-container *ngIf="editingOldTitle !== task.title; else editMode">
        <div class="task-content">
          <strong>{{ task.title }}</strong>
          <p>{{ task.content }}</p>
        </div>
        <div class="btn-group ml-auto">
          <!-- EDIT BUTTON -->
          <button
            (click)="startEdit(task)"
            class="btn btn-sm btn-outline-primary mr-2"
          >
            âœï¸ Edit
          </button>
          <!-- DELETE BUTTON (unchanged) -->
          <button
            (click)="deleteTask(task.title)"
            class="btn btn-sm btn-outline-danger"
          >
            ğŸ—‘ Delete
          </button>
        </div>
      </ng-container>

      <!-- EDIT MODE -->
      <ng-template #editMode>
        <div class="form-group flex-grow">
          <input
            [(ngModel)]="editingTitle"
            class="form-control mb-1"
          >
          <textarea
            [(ngModel)]="editingContent"
            class="form-control mb-1"
          ></textarea>
        </div>
        <div class="btn-group ml-auto">
          <!-- SAVE + CANCEL -->
          <button
            (click)="saveEdit()"
            class="btn btn-sm btn-success mr-2"
          >
            âœ”ï¸ Save
          </button>
          <button
            (click)="cancelEdit()"
            class="btn btn-sm btn-secondary"
          >
            âœ–ï¸ Cancel
          </button>
        </div>
      </ng-template>
    </li>
  </ul>
</div>
